<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <property name="autoIncrement" value="false" dbms="oracle"/>
    <property name="autoIncrement" value="false" dbms="mysql,mssql,h2,postgresql,sybase"/>
    <property name="intType" value="bigint" dbms="postgresql"/>
    <property name="intType" value="int(11)" dbms="mysql,mssql,h2,oracle,sybase,maridb"/>
    <property name="longType" value="bigint" dbms="mysql,postgresql"/>
    <property name="longType" value="bigint" dbms="mssql,h2,oracle,sybase,maridb"/>

    <!--  租户表  -->
    <changeSet id="TENANT-20220825-002" author="ctsi" >
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="cscp_tenant"/>
            </not>
        </preConditions>
        <createTable tableName="cscp_tenant" remarks="租户表">
            <column name="id" type="${longType}" remarks="租户id">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="tenant_account" type="varchar(32)"  remarks="租户账号">
                <constraints nullable="false" />
            </column>
            <column name="tenant_name" type="varchar(64)"  remarks="租户名称">
                <constraints nullable="false" />
            </column>
            <column name="contacts" type="varchar(32)"  remarks="租户名称">
                <constraints nullable="true" />
            </column>
            <column name="phone" type="varchar(11)"  remarks="联系电话">
                <constraints nullable="true" />
            </column>
            <column  name="expire_time" type="datetime" remarks="过期时间" >
                <constraints nullable="true" />
            </column>
            <column  name="active_flag" type="char(1)" remarks="0:未激活，1：激活" >
                <constraints nullable="true" />
            </column>

        </createTable>
        <ext:insert identityInsertEnabled="true" tableName="cscp_tenant">
            <column name="id" value="1478649882954985474"/>
            <column name="tenant_account" value="superAdmin"/>
            <column name="tenant_name" value="租户管理员"/>
            <column name="contacts" value="superAdmin"/>
            <column name="phone" value=""/>
            <column name="expire_time" value="2050-02-05 16:48:09"/>
            <column name="active_flag" value="1"/>
        </ext:insert>

        <sql dbms="mysql" >ALTER TABLE `cscp_tenant` CONVERT TO CHARACTER SET UTF8;</sql>

        <!--  租户管理      -->
        <ext:insert identityInsertEnabled="true" tableName="cscp_menus">
            <column name="id" value="1479655112178688002"/>
            <column name="name" value="tenantManager"/>
            <column name="icon" value="md-contacts"/>
            <column name="title" value="租户管理"/>
            <column name="url" value="/md-contacts"/>
            <column name="http_method" value="*"/>
            <column name="component" value="views/managerPages/tenantManager"/>
            <column name="parent_id" value="1"/>
            <column name="type" value="menu2"/>
            <column name="permission_code" value="cscp.tenant.query"/>
            <column name="orderby" value="1"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_menus">
            <column name="id" value="1482275013187092481"/>
            <column name="title" value="新增租户"/>
            <column name="url" value=""/>
            <column name="http_method" value="POST"/>
            <column name="component" value=""/>
            <column name="parent_id" value="1479655112178688002"/>
            <column name="type" value="button"/>
            <column name="permission_code" value="cscp.tenant.add"/>
            <column name="orderby" value="1"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_menus">
            <column name="id" value="1482275090282594305"/>
            <column name="title" value="编辑租户"/>
            <column name="url" value=""/>
            <column name="http_method" value="PUT"/>
            <column name="component" value=""/>
            <column name="parent_id" value="1479655112178688002"/>
            <column name="type" value="button"/>
            <column name="permission_code" value="cscp.tenant.edit"/>
            <column name="orderby" value="2"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_menus">
            <column name="id" value="1482275206167019521"/>
            <column name="name" value=""/>
            <column name="icon" value=""/>
            <column name="title" value="删除租户"/>
            <column name="url" value=""/>
            <column name="http_method" value="DELETE"/>
            <column name="component" value=""/>
            <column name="parent_id" value="1479655112178688002"/>
            <column name="type" value="button"/>
            <column name="permission_code" value="cscp.tenant.del"/>
            <column name="orderby" value="3"/>
        </ext:insert>
        <!--   租户关系     -->
        <ext:insert identityInsertEnabled="true" tableName="cscp_role_menu">
            <column name="id" value="1479655112078688002"/>
            <column name="role_id" value="1"/>
            <column name="menu_id" value="1479655112178688002"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_role_menu">
            <column name="id" value="1482275013187092481"/>
            <column name="role_id" value="1"/>
            <column name="menu_id" value="1482275013187092481"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_role_menu">
            <column name="id" value="1482275090282594305"/>
            <column name="role_id" value="1"/>
            <column name="menu_id" value="1482275090282594305"/>
        </ext:insert>
        <ext:insert identityInsertEnabled="true" tableName="cscp_role_menu">
            <column name="id" value="1479655112178688002"/>
            <column name="role_id" value="1"/>
            <column name="menu_id" value="1479655112178688002"/>
        </ext:insert>
        <rollback>
            <dropTable tableName="cscp_tenant"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
