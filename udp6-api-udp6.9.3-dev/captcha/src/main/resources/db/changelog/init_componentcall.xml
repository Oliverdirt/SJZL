<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <property name="autoIncrement" value="false" dbms="oracle"/>
    <property name="autoIncrement" value="false" dbms="mysql,mssql,h2,postgresql,sybase"/>
    <property name="intType" value="bigint" dbms="postgresql"/>
    <property name="intType" value="int(11)" dbms="mysql,mssql,h2,oracle,sybase,maridb"/>
    <property name="longType" value="bigint" dbms="mysql,postgresql"/>
    <property name="longType" value="bigint" dbms="mssql,h2,oracle,sybase,maridb"/>

    <changeSet id="BASE-20221102-001" author="ctsi" >
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="cscp_component_call_log"/>
            </not>
        </preConditions>
        <createTable tableName="cscp_component_call_log" remarks="组件调用日志表">
            <column name="id" type="bigint"  remarks="唯一标识" >
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="company" type="varchar(255)"  remarks="公司/部门名称">
                <constraints nullable="true" />
            </column>
            <column name="project_name" type="varchar(255)"  remarks="项目名称">
                <constraints nullable="true" />
            </column>
            <column name="component_name" type="varchar(255)"  remarks="组件名称">
                <constraints nullable="false" />
            </column>
            <column name="component_method_name" type="varchar(255)"  remarks="调用方法">
                <constraints nullable="false" />
            </column>
            <column name="call_time" type="date"  remarks="调用方法">
                <constraints nullable="false" />
            </column>
            <column name="upload_flag" type="number"  remarks="上传ES标志(0:未上传；1：已上传)">
                <constraints nullable="false" />
            </column>
        </createTable>
        <sql dbms="mysql" >ALTER TABLE `cscp_user_work_group` CONVERT TO CHARACTER SET UTF8;</sql>

        <rollback>
            <dropTable tableName="cscp_component_call_log"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
