<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <property name="autoIncrement" value="false" dbms="oracle"/>
    <property name="autoIncrement" value="false" dbms="mysql,mssql,h2,postgresql,sybase"/>
    <property name="intType" value="bigint" dbms="postgresql"/>
    <property name="intType" value="int(11)" dbms="mysql,mssql,h2,oracle,sybase,maridb"/>

    <property name="longType" value="bigint" dbms="mysql,postgresql"/>
    <property name="longType" value="bigint" dbms="mssql,h2,oracle,sybase,maridb"/>

    <changeSet id="KAFKA-20220105-001" author="ctsi" >
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="kafka_auth"/>
            </not>
        </preConditions>

        <createTable tableName="kafka_auth" remarks="kafka权限认证表">
            <column name="id" type="bigint"  remarks="唯一标识">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="kafka_source_id" type="number" remarks="kafka资源ID" >
                <constraints nullable="true" />
            </column>
            <column name="add_auth" type="number" remarks="添加权限" >
                <constraints nullable="true" />
            </column>
            <column name="update_auth" type="number" remarks="更新权限" >
                <constraints nullable="true" />
            </column>
            <column name="remove_auth" type="number" remarks="删除权限" >
                <constraints nullable="true" />
            </column>
        </createTable>
        <sql dbms="mysql" >ALTER TABLE `kafka_auth` CONVERT TO CHARACTER SET UTF8;</sql>
        <rollback>
            <dropTable tableName="kafka_auth"/>
        </rollback>
    </changeSet>

    <changeSet id="KAFKA-20220105-002" author="ctsi" >
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="kafka_source"/>
            </not>
        </preConditions>

        <createTable tableName="kafka_source" remarks="kafka权限认证表">
            <column name="id" type="bigint"  remarks="唯一标识">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="kafka_source_name" type="varchar(50)" remarks="kafka资源名" >
                <constraints nullable="true" />
            </column>
            <column name="kafka_source_broker" type="varchar(50)" remarks="kafka资源broker" >
                <constraints nullable="true" />
            </column>
        </createTable>
        <sql dbms="mysql" >ALTER TABLE `kafka_source` CONVERT TO CHARACTER SET UTF8;</sql>
        <rollback>
            <dropTable tableName="kafka_source"/>
        </rollback>
    </changeSet>
    <changeSet id="KAFKA-20210118-011" author="jshx">
        <sql>
            INSERT INTO cscp_menus VALUES ('1478986495147581441', 'kafka', 'ios-notifications-outline', '消息队列管理', '/kafka', '*', 'views/main/main.vue', '0', 'menu1', '', '10');
            INSERT INTO cscp_menus VALUES ('1478987867838423041', 'kafka-manage', 'md-color-wand', 'kafka管理', '/kafka-manage', '*', '', '1478986495147581441', 'menu2-sp', '', '1');
            INSERT INTO cscp_menus VALUES ('1478989107066511361', 'kafka-topic', 'ios-list-box', 'topic管理', '/kafka-topic', '*', 'views/kafka/kafka-topic/kafka-topic.vue', '1478987867838423041', 'menu2', '', '1');
            INSERT INTO cscp_menus VALUES ('1478989520276758530', 'kafka-colony', 'ios-add-circle', '集群管理', '/kafka-colony', '*', 'views/kafka/kafka-colony/kafka-colony.vue', '1478987867838423041', 'menu2', '', '2');
            INSERT INTO cscp_menus VALUES ('1478989656654553090', 'kafka-group', 'ios-grid', 'group管理', '/kafka-group', '*', 'views/kafka/kafka-group/kafka-group.vue', '1478987867838423041', 'menu2', '', '3');
            INSERT INTO cscp_menus VALUES ('1478989912339324930', 'kafka-operation', 'md-flash', 'kafka操作', '/kafka-operation', '*', '', '1478986495147581441', 'menu2-sp', '', '2');
            INSERT INTO cscp_menus VALUES ('1479289529268449281', 'kafka-production', 'ios-arrow-dropright-circle', '生产', '/kafka-production', '*', 'views/kafka/kafka-production/kafka-production.vue', '1478989912339324930', 'menu2', '', '4');
            INSERT INTO cscp_menus VALUES ('1479335054118346753', 'kafka-consume', 'ios-closed-captioning', '消费', '/kafka-consume', '*', 'views/kafka/kafka-consume/kafka-consume.vue', '1478989912339324930', 'menu2', '', '5');
            INSERT INTO cscp_menus VALUES ('1479349971131162626', 'kafka-power', 'ios-game-controller-a', 'kafka权限', '/kafka-power', '*', 'views/kafka/kafka-power/kafka-power.vue', '1478987867838423041', 'menu2', '', '6');
            INSERT INTO cscp_menus VALUES ('1479657205908135938', 'kafka-configure', 'md-construct', 'kafka配置', '/kafka-configure', '*', 'views/kafka/kafka-configure/kafka-configure.vue', '1478986495147581441', 'menu2', '', '7');
        </sql>
    </changeSet>
    <changeSet id="KAFKA-20210118-012" author="jshx">
        <sql>
        INSERT INTO cscp_role_menu (id,role_id, menu_id) VALUES ('28','1', '1478986495147581441'),
            ('29','1', '1478987867838423041'),('30','1', '1478989107066511361'),('31','1', '1478989520276758530'),
            ('32','1', '1478989656654553090'),('33','1', '1479349971131162626'),('34','1', '1478989912339324930'),
            ('35','1', '1479289529268449281'),('36','1', '1479335054118346753'),('37','1', '1479657205908135938');
        </sql>
    </changeSet>
</databaseChangeLog>
